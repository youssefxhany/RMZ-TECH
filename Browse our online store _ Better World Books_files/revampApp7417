(function(){require(["comps/logo","comps/searchBox","comps/shipToSelector","comps/categoryDropdown","comps/navBar","comps/ticker","comps/help","comps/footerlinks","comps/legal","comps/reviews","comps/social","comps/emailsignup","comps/gridbook","comps/htmlRow","comps/cookieNotice"],function(){$("#headerApp").length&&(bwb.headerApp=new Vue({el:"#headerApp"}));$("#footerApp").length&&(bwb.footerApp=new Vue({el:"#footerApp"}));$("#searchApp").length&&(bwb.searchApp=new Vue({el:"#searchApp",data:function(){return{sharedState:bwb.store.state,watchEnabled:!1,searchFinished:!1,preferencesLoaded:!1,preferencesCookieName:"bwbSearchPreferences",preferencesCookieExpDays:90,currentPrefCookieValues:null,slowLoading:!1,collapse:"",initialPage:1}},watch:{"sharedState.searchStore.queryParameters":function(n,t){this.watchEnabled&&(t.indexName!=n.index||n.page!=t.page||queryParamenters.hitsPerPage!=t.hitsPerPage)&&bwb.search.setUrlQueryParameters(n)},"sharedState.searchStore.results":function(n){if(this.searchFinished=!0,bwb.search.pushToGoogleTagManager(n),$("html, body").animate({scrollTop:"0px"},300),setTimeout(function(){$(".ais-tree-menu__value:contains('Bargain Bookshelf')").parent().parent().remove();$(".ais-tree-menu__value:contains('Internet Archive')").parent().parent().remove()},0),$(window).width()<768&&$("#refinements").hasClass("in")&&($("#btnSearchFilter").click(),$("#refinements").removeClass("in")),!this.preferencesLoaded){this.preferencesLoaded=!0;var t=this.sharedState.searchStore.queryParameters.page;this.currentPrefCookieValues=this.getPreferencesCookie();this.sharedState.searchStore.resultsPerPage=this.currentPrefCookieValues[0]||bwb.search.defaultResultsPerPage;this.sharedState.searchStore.indexName=bwb.search.primaryIndex;this.sharedState.searchStore.page=t}},"sharedState.searchStore.resultsPerPage":function(n){n!==(this.currentPrefCookieValues?this.currentPrefCookieValues[0]:bwb.search.defaultResultsPerPage)&&this.setPreferencesCookie()},"sharedState.searchStore.indexName":function(n){n!==(this.currentPrefCookieValues?this.currentPrefCookieValues[1]:bwb.search.primaryIndex)&&this.setPreferencesCookie()}},methods:{handleResize:function(){this.collapse=$(window).width()<768?"collapse":""},getPreferencesCookie:function(){return bwb.helpers.getCookie(this.preferencesCookieName).split(",")},setPreferencesCookie:function(){this.preferencesLoaded=!1;bwb.helpers.setCookie(this.preferencesCookieName,this.sharedState.searchStore.resultsPerPage+","+this.sharedState.searchStore.indexName,this.preferencesCookieExpDays)},transformItems:function(n){return console.log("categories",n),n}},created:function(){bwb.search.setRefinementsFromUrl();this.watchEnabled=!0},mounted:function(){var n=this;n.handleResize();$(window).resize(n.handleResize);setTimeout(function(){n.searchFinished||(n.slowLoading=!0)},100)}}))})})()